---
globs: *.swift
alwaysApply: false
---

# ğŸ“Š iOS Logging & Analytics Rules

## Logging Philosophy

This iOS app uses **Firebase Analytics & Crashlytics** for comprehensive logging, crash reporting, and user flow tracking. The goal is to enable fast iteration by providing real-time insights into user behavior, crashes, and performance issues through a cloud-based dashboard.

## ğŸ¯ Firebase Crashlytics Integration

### Why Firebase Crashlytics?

1. **ğŸš€ Real-time Dashboard**: View logs, crashes, and metrics in browser
2. **ğŸ“± Native iOS Support**: Excellent Swift/SwiftUI integration
3. **ğŸ” User Flow Tracking**: Custom events and breadcrumbs
4. **âš¡ Fast Setup**: Minimal configuration required
5. **ğŸ¯ Crash Analysis**: Automatic crash grouping and analysis

## ğŸ—ï¸ Logging Architecture

### Global Logging Functions

```swift
// Simple global functions for quick logging
func logInfo(_ message: String, category: String = "General")
func logWarning(_ message: String, category: String = "General")
func logError(_ error: Error, category: String = "General")
func logUserAction(_ action: String, parameters: [String: Any]? = nil)
```


## ğŸ¯ Logging Patterns

1. User Actions (Critical for Flow Tracking)


2. Error Logging
âœ… GOOD: Comprehensive error logging

### 3. Navigation Tracking
âœ… GOOD: Track all navigation events


### 4. API Call Tracking
âœ… GOOD: Track API calls in services

## ğŸš¨ Crash Reporting

### Automatic Crash Collection

```swift
// âœ… GOOD: Set user context for crash reports
func handleSuccessfulLogin(_ response: AuthResponse) async {
    // Set user identifier for crash reporting
    LoggingManager.shared.setUserIdentifier(response.user.id)
    
    // Set custom keys for better crash analysis
    LoggingManager.shared.setCustomValue(response.user.email, forKey: "user_email")
    LoggingManager.shared.setCustomValue(response.user.needsOnboarding, forKey: "needs_onboarding")
    
    // ... rest of login logic ...
}
```

## ğŸ“š Best Practices

### âœ… DO:

- **Log all user actions** for flow tracking
- **Include relevant parameters** for context
- **Use descriptive action names** for analytics

### âŒ DON'T:

- **Over-log** (avoid logging every minor event)
- **Use inconsistent naming** for actions
- **Ignore error logging** (always log errors)

## ğŸš€ Benefits for Fast Iteration

This logging setup enables:

- **ğŸ” Real-time Debugging**: See issues as they happen
- **ğŸ“Š User Flow Analysis**: Understand what works and what doesn't
- **ğŸ”„ Rapid Iteration**: Make data-driven decisions quickly
